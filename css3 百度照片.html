<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="css3 百度照片.css">
    <title>css3动画练习</title>
</head>
<body>
    <div class="wrapper">
        <ul>
            <li>
                <img src="./images/1.jpg">
                <div class="cover">
                    <div class="des">ちびまる子ちゃん</div>
                </div>
            </li>
            <li>
                <img src="images/2.jpg">
                <div class="cover">
                    <div class="des">Sakura Momoko</div>
                </div>
            </li>
            <li>
                <img src="images/3.jpg">
                <div class="cover">
                    <div class="des">ちびまる子ちゃん</div>
                </div>
            </li>
            <li>
                <img src="images/4.jpg">
                <div class="cover">
                    <div class="des">Sakura Momoko</div>
                </div>
            </li>
            <li>
                <img src="images/5.jpg">
                <div class="cover">
                    <div class="des">ちびまる子ちゃん</div>
                </div>
            </li>
        </ul>
    </div>

    <script src="http://code.jquery.com/jquery-3.3.1.js"></script>
    <script>
        window.onload = function(){
            $('ul').addClass('init');
        }

        var oLi = document.getElementsByTagName('li');
        var len = oLi.length;
        for(var i=0; i<len; i++){
            oLi[i].onmouseenter = function(e){
                var dir = getDirection(e, this);
                var oDes = this.getElementsByClassName('des')[0];
                oDes.className = 'des';
                switch(dir){
                    case 0:
                        oDes.classList.add('in-top');
                        break;
                    case 1:
                        oDes.classList.add('in-right');
                        break;
                    case 2:
                        oDes.classList.add('in-bottom');
                        break;
                    case 3:
                        oDes.classList.add('in-left');
                }
            }

            oLi[i].onmouseleave = function(e){
                var dir = getDirection(e, this);
                var oDes = this.getElementsByClassName('des')[0];
                oDes.className = 'des';
                switch(dir){
                    case 0:
                        oDes.classList.add('out-top');
                        break;
                    case 1:
                        oDes.classList.add('out-right');
                        break;
                    case 2:
                        oDes.classList.add('out-bottom');
                        break;
                    case 3:
                        oDes.classList.add('out-left');
                }
            }            
        }

        function getDirection(e, ele){
            var w = ele.offsetWidth;
            var h = ele.offsetHeight;
            var x = (e.offsetX - w/2)*(w>h ? h/w : 1);
            var y = (e.offsetY - h/2)*(h>w ? w/h : 1);
            var d = (Math.round((Math.atan2(y, x)*(180/Math.PI) + 180)/90) +3)%4;
            return d;
        }
    </script>
</body>
</html>